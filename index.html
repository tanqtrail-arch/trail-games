<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TRAIL æ¢ç©¶ã‚²ãƒ¼ãƒ ãƒ©ãƒ³ãƒ‰</title>
<meta name="description" content="æ¢ç©¶æ•™å®¤TRAILã®å­¦ç¿’ã‚²ãƒ¼ãƒ ãƒãƒ¼ã‚¿ãƒ«ã€‚æ€è€ƒåŠ›ãƒ»ç†ç§‘ãƒ»ç¤¾ä¼šãƒ»ç®—æ•°ãƒ»å‰µé€ åŠ›ã‚’éŠã³ãªãŒã‚‰å­¦ã¹ã‚‹ã‚²ãƒ¼ãƒ ãŒé›†ã¾ã£ã¦ã„ã¾ã™ã€‚">
<meta property="og:title" content="TRAIL æ¢ç©¶ã‚²ãƒ¼ãƒ ãƒ©ãƒ³ãƒ‰">
<meta property="og:description" content="ã‚ãã‚“ã§ ã¾ãªã‚“ã§ ç™ºè¦‹ã—ã‚ˆã†ï¼æ¢ç©¶æ•™å®¤TRAILã®å­¦ç¿’ã‚²ãƒ¼ãƒ ãƒãƒ¼ã‚¿ãƒ«ã€‚">
<meta property="og:type" content="website">
<meta property="og:locale" content="ja_JP">
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸŒ²</text></svg>">
<link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700;900&family=Fredoka:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  :root {
    --bg-cream: #fef9ef;
    --trail-green: #2d9a4e;
    --trail-green-light: #5ec97a;
    --sun-yellow: #ffd23f;
    --berry-pink: #ff6b8a;
    --text-dark: #2c3e2d;
    --text-mid: #5a6b5c;
    --card-white: #ffffff;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: 'Zen Maru Gothic', sans-serif;
    background: var(--bg-cream);
    color: var(--text-dark);
    min-height: 100vh;
    overflow-x: hidden;
    -webkit-tap-highlight-color: transparent;
  }

  /* === Sky & Decorations === */
  .bg-sky {
    position: fixed; top: 0; left: 0; right: 0; height: 300px;
    background: linear-gradient(180deg, #b8e4f9 0%, #ddf2ff 40%, #fef9ef 100%);
    z-index: 0; pointer-events: none;
  }
  .cloud { position: fixed; background: white; border-radius: 50px; opacity: 0.7; z-index: 0; pointer-events: none; }
  .cloud::before, .cloud::after { content: ''; position: absolute; background: white; border-radius: 50%; }
  .cloud-1 { width: 80px; height: 28px; top: 40px; left: 10%; animation: cloudDrift 30s linear infinite; }
  .cloud-1::before { width: 36px; height: 36px; top: -18px; left: 14px; }
  .cloud-1::after { width: 24px; height: 24px; top: -10px; left: 44px; }
  .cloud-2 { width: 60px; height: 22px; top: 70px; right: 15%; animation: cloudDrift 40s linear infinite reverse; opacity: 0.5; }
  .cloud-2::before { width: 28px; height: 28px; top: -14px; left: 10px; }
  .cloud-2::after { width: 20px; height: 20px; top: -8px; left: 32px; }
  .cloud-3 { width: 50px; height: 18px; top: 100px; left: 55%; animation: cloudDrift 35s linear infinite; opacity: 0.4; }
  .cloud-3::before { width: 22px; height: 22px; top: -11px; left: 8px; }
  .cloud-3::after { width: 16px; height: 16px; top: -6px; left: 26px; }
  @keyframes cloudDrift { 0% { transform: translateX(-20vw); } 100% { transform: translateX(120vw); } }
  .leaf-deco { position: fixed; pointer-events: none; z-index: 0; font-size: 24px; opacity: 0.2; }
  .leaf-1 { top: 180px; left: 5%; transform: rotate(-30deg); }
  .leaf-2 { top: 350px; right: 3%; transform: rotate(20deg); font-size: 20px; }
  .leaf-3 { top: 600px; left: 8%; transform: rotate(45deg); font-size: 18px; }
  .leaf-4 { top: 900px; right: 6%; transform: rotate(-15deg); }

  /* === Header === */
  .header {
    position: sticky; top: 0; z-index: 100;
    backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px);
    background: rgba(255,255,255,0.88);
    border-bottom: 2px solid rgba(45,154,78,0.12);
    padding: 14px 20px; text-align: center;
  }
  .header-top { display: flex; align-items: center; justify-content: center; gap: 8px; margin-bottom: 2px; }
  .header-icon { font-size: 26px; line-height: 1; }
  .header-logo { font-family: 'Fredoka', sans-serif; font-size: 13px; font-weight: 700; letter-spacing: 3px; color: var(--trail-green); }
  .header-title { font-size: 19px; font-weight: 900; color: var(--text-dark); }
  .header-title span { color: var(--trail-green); }
  .header-sub { font-size: 10px; color: var(--text-mid); letter-spacing: 1px; margin-top: 1px; }

  /* === Category Bar === */
  .category-bar-wrap {
    position: sticky; top: 72px; z-index: 99;
    backdrop-filter: blur(14px); -webkit-backdrop-filter: blur(14px);
    background: rgba(255,255,255,0.8);
    border-bottom: 1px solid rgba(45,154,78,0.08);
  }
  .category-bar {
    max-width: 480px; margin: 0 auto;
    padding: 10px 14px; display: flex; gap: 7px;
    overflow-x: auto; scrollbar-width: none;
    -webkit-mask-image: linear-gradient(to right, black 90%, transparent 100%);
    mask-image: linear-gradient(to right, black 90%, transparent 100%);
  }
  .category-bar.scrolled-end {
    -webkit-mask-image: linear-gradient(to left, black 90%, transparent 100%);
    mask-image: linear-gradient(to left, black 90%, transparent 100%);
  }
  .category-bar.scrolled-mid {
    -webkit-mask-image: linear-gradient(to right, transparent 0%, black 10%, black 90%, transparent 100%);
    mask-image: linear-gradient(to right, transparent 0%, black 10%, black 90%, transparent 100%);
  }
  .category-bar::-webkit-scrollbar { display: none; }
  .cat-btn {
    flex-shrink: 0; padding: 7px 14px; border-radius: 20px;
    border: 2px solid transparent; background: #f0f7f1; color: var(--text-mid);
    font-size: 13px; font-family: 'Zen Maru Gothic', sans-serif; font-weight: 700;
    cursor: pointer; transition: all 0.25s ease; white-space: nowrap;
  }
  .cat-btn.active {
    background: var(--trail-green); color: white;
    border-color: var(--trail-green); box-shadow: 0 3px 12px rgba(45,154,78,0.3);
  }
  .cat-btn:not(.active):hover { background: #e0f0e3; }
  .cat-btn:not(.active):active { transform: scale(0.95); }

  /* === Game Count === */
  .game-count { text-align: center; padding: 18px 16px 6px; position: relative; z-index: 1; }
  .game-count .num { font-family: 'Fredoka', sans-serif; font-size: 40px; font-weight: 700; color: var(--trail-green); }
  .game-count small { display: block; font-size: 12px; color: var(--text-mid); margin-top: -2px; font-weight: 700; }

  /* === Game List === */
  .game-list {
    max-width: 480px; margin: 0 auto;
    padding: 14px 16px 60px; display: flex; flex-direction: column; gap: 16px;
    position: relative; z-index: 1;
  }

  /* === Empty State === */
  .empty-state {
    text-align: center; padding: 40px 20px;
    color: var(--text-mid); font-size: 14px; font-weight: 700;
  }
  .empty-state .empty-icon { font-size: 48px; margin-bottom: 12px; opacity: 0.5; }
  .empty-state .empty-text { line-height: 1.8; }

  /* === Game Card === */
  .game-card {
    position: relative; border-radius: 22px; overflow: hidden;
    background: var(--card-white);
    box-shadow: 0 2px 16px rgba(0,0,0,0.06), 0 1px 4px rgba(0,0,0,0.04);
    cursor: pointer; transition: transform 0.25s ease, box-shadow 0.25s ease;
    animation: cardPop 0.45s ease both;
    outline: none;
  }
  .game-card:hover { transform: translateY(-3px); box-shadow: 0 6px 24px rgba(0,0,0,0.10), 0 2px 8px rgba(0,0,0,0.06); }
  .game-card:active { transform: scale(0.97); box-shadow: 0 1px 8px rgba(0,0,0,0.08); }
  .game-card:focus-visible { outline: 3px solid var(--trail-green); outline-offset: 2px; }
  @keyframes cardPop { from { opacity: 0; transform: translateY(24px) scale(0.96); } to { opacity: 1; transform: translateY(0) scale(1); } }
  .game-card:nth-child(1){animation-delay:.05s}.game-card:nth-child(2){animation-delay:.1s}.game-card:nth-child(3){animation-delay:.15s}.game-card:nth-child(4){animation-delay:.2s}.game-card:nth-child(5){animation-delay:.25s}.game-card:nth-child(6){animation-delay:.3s}

  .card-visual { position: relative; height: 130px; display: flex; align-items: center; justify-content: center; overflow: hidden; }
  .card-visual .emoji-icon { font-size: 54px; position: relative; z-index: 2; filter: drop-shadow(0 3px 6px rgba(0,0,0,0.15)); animation: iconBounce 3s ease-in-out infinite; }
  @keyframes iconBounce { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-6px)} }
  .card-visual .bg-deco { position: absolute; inset: 0; }
  .deco-wave { position: absolute; bottom: -2px; left: 0; right: 0; height: 20px; background: var(--card-white); border-radius: 20px 20px 0 0; }
  .deco-trees { position: absolute; bottom: 0; left: 0; right: 0; font-size: 20px; text-align: center; opacity: 0.2; letter-spacing: 8px; line-height: 1; padding-bottom: 6px; }
  .deco-dots { position: absolute; width: 100%; height: 100%; opacity: 0.3; }
  .deco-dots::before { content: '\00B7 \00B7 \00B7 \00B7 \00B7 \00B7 \00B7 \00B7 \00B7'; position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%); font-size: 14px; letter-spacing: 4px; color: rgba(255,255,255,0.6); white-space: nowrap; }

  .card-body { padding: 14px 16px 16px; }
  .card-tags { display: flex; gap: 6px; margin-bottom: 8px; flex-wrap: wrap; }
  .tag { font-size: 10px; font-weight: 700; padding: 3px 10px; border-radius: 10px; letter-spacing: 0.3px; }
  .card-title { font-size: 18px; font-weight: 900; margin-bottom: 5px; line-height: 1.3; }
  .card-desc { font-size: 12.5px; color: var(--text-mid); line-height: 1.7; margin-bottom: 14px; }
  .card-footer { display: flex; align-items: center; justify-content: space-between; }
  .card-difficulty { display: flex; gap: 4px; align-items: center; }
  .card-difficulty .label { font-size: 10px; color: var(--text-mid); margin-right: 4px; font-weight: 700; }
  .trail-marker { width: 12px; height: 12px; border-radius: 3px; background: #e8ede9; position: relative; }
  .trail-marker.filled { background: var(--sun-yellow); box-shadow: 0 1px 4px rgba(255,210,63,0.4); }
  .trail-marker.filled::after { content: '\2B50'; font-size: 8px; position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%); }
  .play-btn {
    display: flex; align-items: center; gap: 5px; padding: 9px 20px;
    border-radius: 14px; border: none; font-family: 'Zen Maru Gothic', sans-serif;
    font-size: 13px; font-weight: 900; color: white; cursor: pointer;
    transition: all 0.2s ease; box-shadow: 0 3px 10px rgba(0,0,0,0.12); letter-spacing: 0.5px;
  }
  .play-btn:active { transform: scale(0.93); }

  /* === Badges === */
  .badge-new {
    position: absolute; top: 10px; right: 10px; z-index: 5;
    font-family: 'Fredoka', sans-serif; font-size: 11px; font-weight: 700;
    padding: 4px 12px; border-radius: 10px; background: var(--berry-pink); color: white;
    box-shadow: 0 2px 8px rgba(255,107,138,0.4); animation: badgePop 2s ease-in-out infinite;
  }
  @keyframes badgePop { 0%,100%{transform:scale(1)} 50%{transform:scale(1.08)} }
  .coming-soon-badge {
    position: absolute; top: 10px; right: 10px; z-index: 5;
    font-family: 'Fredoka', sans-serif; font-size: 11px; font-weight: 700;
    padding: 4px 12px; border-radius: 10px; background: #a0a8a2; color: white;
  }

  /* === Themes === */
  .theme-forest .card-visual { background: linear-gradient(135deg, #c8f0d4, #a8e6b8, #8dd99c); }
  .theme-forest .tag { background: #d4f5de; color: #1a7a3a; }
  .theme-forest .play-btn { background: linear-gradient(135deg, #2d9a4e, #3ab85c); }
  .theme-forest .card-title { color: #1a6b35; }
  .theme-sunset .card-visual { background: linear-gradient(135deg, #ffe0c8, #ffc9a8, #ffb088); }
  .theme-sunset .tag { background: #ffe8d6; color: #c45a10; }
  .theme-sunset .play-btn { background: linear-gradient(135deg, #ff8c42, #ff6b3a); }
  .theme-sunset .card-title { color: #b34a0a; }
  .theme-ocean .card-visual { background: linear-gradient(135deg, #c8e8ff, #a8d8f8, #88c8f0); }
  .theme-ocean .tag { background: #d6eeff; color: #1a6da0; }
  .theme-ocean .play-btn { background: linear-gradient(135deg, #3a9fd5, #5cb8e6); }
  .theme-ocean .card-title { color: #185a85; }
  .theme-berry .card-visual { background: linear-gradient(135deg, #ffd6e0, #ffc0cf, #ffaabe); }
  .theme-berry .tag { background: #ffe0ea; color: #c4305a; }
  .theme-berry .play-btn { background: linear-gradient(135deg, #ff4d78, #ff6b8a); }
  .theme-berry .card-title { color: #a82850; }
  .theme-lavender .card-visual { background: linear-gradient(135deg, #e4d8ff, #d0c0ff, #bca8f8); }
  .theme-lavender .tag { background: #ece4ff; color: #6a4aaf; }
  .theme-lavender .play-btn { background: linear-gradient(135deg, #8b6fc0, #a78bfa); }
  .theme-lavender .card-title { color: #5a3a9a; }
  .theme-earth .card-visual { background: linear-gradient(135deg, #f0e4c8, #e8d8a8, #dcc888); }
  .theme-earth .tag { background: #f5ecd6; color: #8b6914; }
  .theme-earth .play-btn { background: linear-gradient(135deg, #b08a30, #c4a35a); }
  .theme-earth .card-title { color: #6a5010; }
  .theme-gallery .card-visual { background: linear-gradient(135deg, #f5e6c8, #e8d4a8, #d4c090); }
  .theme-gallery .tag { background: #f7ecd8; color: #8a6520; }
  .theme-gallery .play-btn { background: linear-gradient(135deg, #b8860b, #d4a030); }
  .theme-gallery .card-title { color: #6b4c0a; }

  /* === Coming Soon State === */
  .game-card.coming-soon { opacity: 0.5; }
  .game-card.coming-soon:hover { transform: translateY(-1px); opacity: 0.6; }
  .game-card.coming-soon .play-btn { background: #bbb !important; box-shadow: none; }
  .game-card.coming-soon .emoji-icon { animation: none !important; }

  /* === Hidden === */
  .game-card.hidden { display: none; }

  /* === Footer === */
  .footer { text-align: center; padding: 30px 20px 50px; position: relative; z-index: 1; }
  .footer-trail { display: flex; align-items: center; justify-content: center; gap: 6px; margin-bottom: 14px; }
  .footer-trail .dot { width: 6px; height: 6px; border-radius: 50%; background: var(--trail-green); opacity: 0.3; }
  .footer-trail .dot:nth-child(2){opacity:.5} .footer-trail .dot:nth-child(3){opacity:.7;width:8px;height:8px}
  .footer p { font-size: 11px; color: var(--text-mid); line-height: 1.8; }
  .footer .brand { font-weight: 900; color: var(--trail-green); }
  .footer .motto { display: inline-block; margin-top: 6px; padding: 4px 14px; background: #edf7f0; border-radius: 12px; font-size: 11px; color: var(--trail-green); font-weight: 700; }

  /* === Toast === */
  .toast-msg {
    position: fixed; bottom: 32px; left: 50%; transform: translateX(-50%);
    background: white; color: var(--text-dark); padding: 14px 26px; border-radius: 18px;
    font-size: 14px; font-weight: 700; z-index: 999;
    border: 2px solid var(--trail-green-light);
    box-shadow: 0 6px 24px rgba(45,154,78,0.15);
    animation: toastUp 0.3s ease, toastDown 0.3s ease 2s forwards;
  }
  @keyframes toastUp { from{opacity:0;transform:translateX(-50%) translateY(16px)} to{opacity:1;transform:translateX(-50%) translateY(0)} }
  @keyframes toastDown { from{opacity:1} to{opacity:0;transform:translateX(-50%) translateY(16px)} }

  ::-webkit-scrollbar { width: 0; }
</style>
</head>
<body>
<div class="bg-sky"></div>
<div class="cloud cloud-1"></div>
<div class="cloud cloud-2"></div>
<div class="cloud cloud-3"></div>
<div class="leaf-deco leaf-1">ğŸŒ¿</div>
<div class="leaf-deco leaf-2">ğŸƒ</div>
<div class="leaf-deco leaf-3">ğŸŒ±</div>
<div class="leaf-deco leaf-4">ğŸ‚</div>

<header class="header">
  <div class="header-top">
    <div class="header-icon">ğŸŒ²</div>
    <div>
      <div class="header-logo">TRAIL</div>
      <div class="header-title"><span>æ¢ç©¶</span>ã‚²ãƒ¼ãƒ ãƒ©ãƒ³ãƒ‰</div>
    </div>
    <div class="header-icon">ğŸŒ²</div>
  </div>
  <div class="header-sub">ã‚ãã‚“ã§ ã¾ãªã‚“ã§ ç™ºè¦‹ã—ã‚ˆã†ï¼</div>
</header>

<div class="category-bar-wrap">
  <nav class="category-bar" id="categoryBar" aria-label="ã‚²ãƒ¼ãƒ ã‚«ãƒ†ã‚´ãƒª">
    <button class="cat-btn active" data-cat="all">ğŸ® ã™ã¹ã¦</button>
    <button class="cat-btn" data-cat="thinking">ğŸ§  æ€è€ƒåŠ›</button>
    <button class="cat-btn" data-cat="science">ğŸ”¬ ç†ç§‘</button>
    <button class="cat-btn" data-cat="social">ğŸŒ ç¤¾ä¼š</button>
    <button class="cat-btn" data-cat="math">ğŸ”¢ ç®—æ•°</button>
    <button class="cat-btn" data-cat="creative">ğŸ¨ å‰µé€ åŠ›</button>
    <button class="cat-btn" data-cat="art">ğŸ–¼ï¸ ç¾è¡“</button>
    <button class="cat-btn" data-cat="language">ğŸ”¤ è‹±èª</button>
  </nav>
</div>

<div class="game-count">
  <div class="num" id="visibleCount">0</div>
  <small id="countLabel"></small>
</div>

<div class="game-list" id="gameList"></div>

<footer class="footer">
  <div class="footer-trail">
    <div class="dot"></div><div class="dot"></div><div class="dot"></div>
    <span>ğŸŒ²</span>
    <div class="dot"></div><div class="dot"></div><div class="dot"></div>
  </div>
  <p>
    <span class="brand">æ¢ç©¶æ•™å®¤ TRAIL</span><br>
    ã‚ãŸã‚‰ã—ã„ã‚²ãƒ¼ãƒ ãŒã©ã‚“ã©ã‚“ãµãˆã‚‹ã‚ˆï¼<br>
    <span class="motto">ğŸŒ¿ ã‚ãã‚“ã§ ã¾ãªã‚“ã§ ç™ºè¦‹ã—ã‚ˆã†ï¼ ğŸŒ¿</span>
  </p>
</footer>

<script>
  // === Game Data ===
  var games = [
    {
      id: 'maze-attack',
      title: 'è¿·è·¯ã‚¢ã‚¿ãƒƒã‚¯',
      desc: 'AIã¨å¯¾æ±ºï¼ã‚«ãƒ¼ãƒ‰ã®ã¡ã‹ã‚‰ã‚’ä½¿ã£ã¦è¿·è·¯ã‚’ã‚¯ãƒªã‚¢ã—ã‚ˆã†ã€‚ãã¿ã®ä½œæˆ¦ã§ã‚´ãƒ¼ãƒ«ã‚’ã‚ã–ã›ï¼',
      emoji: 'ğŸ°',
      theme: 'forest',
      category: 'thinking',
      tags: ['ğŸ§  æ€è€ƒåŠ›', 'âš”ï¸ å¯¾æˆ¦'],
      difficulty: 3,
      isNew: true,
      comingSoon: false,
      url: 'https://tanqtrail-arch.github.io/Meiro-atakku/',
      decoType: 'trees',
      decoContent: 'ğŸŒ²ğŸŒ³ğŸŒ²ğŸŒ³ğŸŒ²'
    },
    {
      id: 'bunsu-yugo',
      title: 'åˆ†æ•°èåˆ',
      desc: '2ã¤ã®åˆ†æ•°ã‚’ãŸã—ã¦ç›®æ¨™ã®æ•°ã‚’ã¤ãã‚ã†ï¼é€šåˆ†ã—ã¦è¶³ã—ç®—ã™ã‚‹åŠ›ãŒæ¥½ã—ãèº«ã«ã¤ãã‚²ãƒ¼ãƒ ã€‚ã‚¿ã‚¤ãƒ ãƒœãƒ¼ãƒŠã‚¹ã§é«˜å¾—ç‚¹ã‚’ã‚ã–ã›ï¼',
      emoji: 'ğŸ”¬',
      theme: 'ocean',
      category: 'math',
      tags: ['ğŸ”¢ ç®—æ•°', 'â• åˆ†æ•°'],
      difficulty: 2,
      isNew: true,
      comingSoon: false,
      url: 'bunsu-yugo/',
      decoType: 'dots'
    },
    {
      id: 'yakubun-kobo',
      title: 'ç´„åˆ†å·¥æˆ¿',
      desc: 'å¤§ããªåˆ†æ•°ã‚’ã„ã¡ã°ã‚“ã‚·ãƒ³ãƒ—ãƒ«ãªã‹ãŸã¡ã«ã—ã‚ˆã†ï¼æœ€å¤§å…¬ç´„æ•°ã‚’è¦‹ã¤ã‘ã¦ç´„åˆ†ã™ã‚‹ç·´ç¿’ã‚²ãƒ¼ãƒ ã€‚é€£ç¶šæ­£è§£ã§ãƒœãƒ¼ãƒŠã‚¹ï¼',
      emoji: 'ğŸ”§',
      theme: 'sunset',
      category: 'math',
      tags: ['ğŸ”¢ ç®—æ•°', 'âœ‚ï¸ ç´„åˆ†'],
      difficulty: 3,
      isNew: true,
      comingSoon: false,
      url: 'yakubun-kobo/',
      decoType: 'dots'
    },
    {
      id: 'bunsu-puzzle',
      title: 'åˆ†æ•°ãƒ‘ã‚ºãƒ«',
      desc: 'åˆ†æ•°ã®å¼ã®â–¡ã«ã‚ã¦ã¯ã¾ã‚‹æ•°ã‚’è¦‹ã¤ã‘ã‚ˆã†ï¼ç­‰ã—ã„åˆ†æ•°ãƒ»è¶³ã—ç®—ãƒ»ã‹ã‘ç®—ã®ãƒ‘ã‚ºãƒ«ã§ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—ï¼',
      emoji: 'ğŸ§©',
      theme: 'forest',
      category: 'math',
      tags: ['ğŸ”¢ ç®—æ•°', 'ğŸ§© ãƒ‘ã‚ºãƒ«'],
      difficulty: 3,
      isNew: true,
      comingSoon: false,
      url: 'bunsu-puzzle/',
      decoType: 'dots'
    },
    {
      id: 'eigo-only',
      title: 'Eigo Only! - è‹±èªãªãã¨ãã‚¯ã‚¤ã‚º',
      desc: '3ã¤ã®è‹±èªãƒ’ãƒ³ãƒˆã‚’èª­ã‚“ã§ã€ç­”ãˆã‚’å½“ã¦ã‚ˆã†ï¼å°å­¦4å¹´ãƒ»ä¸­å­¦1å¹´ãƒ»ä¸­å­¦3å¹´ã®3ã¤ã®ãƒ¬ãƒ™ãƒ«ã‹ã‚‰é¸ã¹ã‚‹ã‚¯ã‚¤ã‚ºã€‚è‹±èªã®è³ªå•æ–‡ã‚’èª­ã¿è§£ãåŠ›ãŒèº«ã«ã¤ãï¼',
      emoji: 'ğŸ”¤',
      theme: 'ocean',
      category: 'language',
      tags: ['ğŸ”¤ è‹±èª', 'â“ ã‚¯ã‚¤ã‚º'],
      difficulty: 2,
      isNew: true,
      comingSoon: false,
      url: 'https://tanqtrail-arch.github.io/eigo-only/',
      decoType: 'trees',
      decoContent: 'ğŸ“šâœï¸ğŸ“šâœï¸ğŸ“š'
    },
    {
      id: 'shingan',
      title: 'çœŸè´‹ShinGan',
      desc: 'æœ¬ç‰©ã®çµµã¨å½ç‰©ã®çµµã‚’ãã‚‰ã¹ã¦ã€ã©ã£ã¡ãŒãƒ›ãƒ³ãƒ¢ãƒã‹è¦‹ã¬ã‘ï¼ãã¿ã®ç›®ã¯ã”ã¾ã‹ã›ãªã„ï¼Ÿ',
      emoji: 'ğŸ–¼ï¸',
      theme: 'gallery',
      category: 'art',
      tags: ['ğŸ–¼ï¸ ç¾è¡“', 'ğŸ‘ï¸ è¦³å¯ŸåŠ›'],
      difficulty: 2,
      isNew: false,
      comingSoon: true,
      url: null,
      decoType: 'trees',
      decoContent: 'ğŸ¨ğŸ–¼ï¸ğŸ¨ğŸ–¼ï¸ğŸ¨'
    },
    {
      id: 'element-quiz',
      title: 'å…ƒç´ ã‚¯ã‚¨ã‚¹ãƒˆ',
      desc: 'ãƒ’ãƒ³ãƒˆã‹ã‚‰å…ƒç´ ã‚’ã‚ã¦ã‚ˆã†ï¼å‘¨æœŸè¡¨ã®ã²ã¿ã¤ã‚’å†’é™ºã—ãªãŒã‚‰ã€åŒ–å­¦ã¯ã‹ã›ã‚’ã‚ã–ã™ã‚¯ã‚¤ã‚ºã€‚',
      emoji: 'âš—ï¸',
      theme: 'ocean',
      category: 'science',
      tags: ['ğŸ”¬ ç†ç§‘', 'â“ ã‚¯ã‚¤ã‚º'],
      difficulty: 2,
      isNew: false,
      comingSoon: true,
      url: null,
      decoType: 'dots'
    },
    {
      id: 'number-puzzle',
      title: 'ãƒŠãƒ³ãƒãƒ¼ãƒ–ãƒ¬ã‚¤ã‚¯',
      desc: 'æ•°ã®ãƒ«ãƒ¼ãƒ«ã‚’è¦‹ã¤ã‘ã¦ãƒ‘ã‚ºãƒ«ã‚’ã¨ã“ã†ï¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è¦‹ã¬ãåŠ›ãŒãŸã‚ã•ã‚Œã‚‹ã‚²ãƒ¼ãƒ ã€‚',
      emoji: 'ğŸ”“',
      theme: 'sunset',
      category: 'math',
      tags: ['ğŸ”¢ ç®—æ•°', 'ğŸ§© ãƒ‘ã‚ºãƒ«'],
      difficulty: 4,
      isNew: false,
      comingSoon: true,
      url: null,
      decoType: 'dots'
    },
    {
      id: 'map-explorer',
      title: 'ãƒãƒƒãƒ—æ¢æ¤œéšŠ',
      desc: 'ãƒ’ãƒ³ãƒˆã‚’ãŸã‚ˆã‚Šã«ä¸–ç•Œã®éƒ½å¸‚ã‚’ã‚ã¦ã‚ˆã†ï¼åœ°ç†ã¨æ–‡åŒ–ã®ã‚‚ã®ã—ã‚Šã«ãªã‚Œã‚‹æ¢æ¤œã‚¯ã‚¤ã‚ºã€‚',
      emoji: 'ğŸ—ºï¸',
      theme: 'earth',
      category: 'social',
      tags: ['ğŸŒ ç¤¾ä¼š', 'ğŸ§­ æ¢æ¤œ'],
      difficulty: 2,
      isNew: false,
      comingSoon: true,
      url: null,
      decoType: 'trees',
      decoContent: 'ğŸ”ï¸ğŸŒ„ğŸ”ï¸ğŸŒ„ğŸ”ï¸'
    },
    {
      id: 'story-builder',
      title: 'ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒ“ãƒ«ãƒ€ãƒ¼',
      desc: 'ãƒ©ãƒ³ãƒ€ãƒ ãªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‹ã‚‰ãŠè©±ã‚’ã¤ãã‚ã†ï¼ãã¿ã ã‘ã®ã‚ªãƒªã‚¸ãƒŠãƒ«ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã«æŒ‘æˆ¦ã€‚',
      emoji: 'ğŸ“–',
      theme: 'lavender',
      category: 'creative',
      tags: ['ğŸ¨ å‰µé€ åŠ›', 'ğŸ“ ç‰©èª'],
      difficulty: 3,
      isNew: false,
      comingSoon: true,
      url: null,
      decoType: 'dots'
    },
    {
      id: 'logic-tower',
      title: 'ãƒ­ã‚¸ãƒƒã‚¯ã‚¿ãƒ¯ãƒ¼',
      desc: 'ãœã‚“ã¶ã®æ¡ä»¶ã‚’ã¿ãŸã™ç­”ãˆã‚’è¦‹ã¤ã‘ã‚ï¼ãƒ¬ãƒ™ãƒ«ãŒä¸ŠãŒã‚‹ã»ã©ã‚€ãšã‹ã—ããªã‚‹é ­ã®ãŸã„ãã†ã€‚',
      emoji: 'ğŸ—¼',
      theme: 'berry',
      category: 'thinking',
      tags: ['ğŸ§  æ€è€ƒåŠ›', 'ğŸ” è«–ç†'],
      difficulty: 5,
      isNew: false,
      comingSoon: true,
      url: null,
      decoType: 'dots'
    }
  ];

  // === DOM References ===
  var gameList = document.getElementById('gameList');
  var countEl = document.getElementById('visibleCount');
  var countLabel = document.getElementById('countLabel');
  var categoryBar = document.getElementById('categoryBar');
  var catBtns = document.querySelectorAll('.cat-btn');

  // === Render Cards ===
  function renderCards() {
    gameList.innerHTML = '';
    games.forEach(function(game) {
      var card = document.createElement('div');
      card.className = 'game-card theme-' + game.theme + (game.comingSoon ? ' coming-soon' : '');
      card.dataset.cat = game.category;
      card.dataset.id = game.id;
      card.setAttribute('tabindex', '0');
      card.setAttribute('role', 'link');
      card.setAttribute('aria-label', game.title + (game.comingSoon ? 'ï¼ˆæº–å‚™ä¸­ï¼‰' : ''));

      // Badge
      var badge = '';
      if (game.isNew && !game.comingSoon) {
        badge = '<div class="badge-new">NEW!</div>';
      } else if (game.comingSoon) {
        badge = '<div class="coming-soon-badge">æº–å‚™ä¸­</div>';
      }

      // Deco
      var deco = '';
      if (game.decoType === 'trees') {
        deco = '<div class="deco-trees">' + (game.decoContent || '') + '</div>';
      } else {
        deco = '<div class="deco-dots"></div>';
      }

      // Difficulty markers
      var markers = '';
      for (var i = 1; i <= 5; i++) {
        markers += '<div class="trail-marker' + (i <= game.difficulty ? ' filled' : '') + '"></div>';
      }

      // Tags
      var tagsHtml = game.tags.map(function(t) { return '<span class="tag">' + t + '</span>'; }).join('');

      // Play button
      var btnText = game.comingSoon ? 'ğŸ”’ æº–å‚™ä¸­' : 'â–¶ ã‚ãã¶ï¼';

      card.innerHTML =
        badge +
        '<div class="card-visual">' +
          '<div class="bg-deco">' + deco + '</div>' +
          '<div class="deco-wave"></div>' +
          '<div class="emoji-icon">' + game.emoji + '</div>' +
        '</div>' +
        '<div class="card-body">' +
          '<div class="card-tags">' + tagsHtml + '</div>' +
          '<div class="card-title">' + game.title + '</div>' +
          '<div class="card-desc">' + game.desc + '</div>' +
          '<div class="card-footer">' +
            '<div class="card-difficulty"><span class="label">ã‚€ãšã‹ã—ã•</span>' + markers + '</div>' +
            '<button class="play-btn">' + btnText + '</button>' +
          '</div>' +
        '</div>';

      // Click handler
      card.addEventListener('click', function() { launchGame(game); });
      card.addEventListener('keydown', function(e) {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          launchGame(game);
        }
      });

      gameList.appendChild(card);
    });
  }

  // === Launch Game ===
  function launchGame(game) {
    if (game.url) {
      window.location.href = game.url;
    } else if (game.comingSoon) {
      showToast('ğŸŒ± ã€Œ' + game.title + 'ã€ã¯æº–å‚™ä¸­ã ã‚ˆï¼ãŠãŸã®ã—ã¿ã«ï¼');
    } else {
      showToast('ğŸŒ± ã€Œ' + game.title + 'ã€ã¯ã¾ã‚‚ãªãå…¬é–‹ï¼');
    }
  }

  // === Filter ===
  function filterCards(cat) {
    var cards = document.querySelectorAll('.game-card');
    var playable = 0;
    var comingSoonCount = 0;
    var totalVisible = 0;

    cards.forEach(function(card) {
      if (cat === 'all' || card.dataset.cat === cat) {
        card.classList.remove('hidden');
        totalVisible++;
        var game = games.find(function(g) { return g.id === card.dataset.id; });
        if (game && !game.comingSoon) { playable++; }
        else { comingSoonCount++; }
      } else {
        card.classList.add('hidden');
      }
    });

    countEl.textContent = totalVisible;

    if (totalVisible === 0) {
      countLabel.textContent = '';
      showEmptyState(cat);
    } else {
      removeEmptyState();
      if (comingSoonCount > 0 && playable > 0) {
        countLabel.textContent = 'ã¤ã®ã‚²ãƒ¼ãƒ ï¼ï¼ˆ' + playable + 'ã¤ã‚ãã¹ã‚‹ãƒ»' + comingSoonCount + 'ã¤æº–å‚™ä¸­ï¼‰';
      } else if (playable === 0) {
        countLabel.textContent = 'ã¤ã®ã‚²ãƒ¼ãƒ ãŒæº–å‚™ä¸­ ğŸš§';
      } else {
        countLabel.textContent = 'ã¤ã®ã‚²ãƒ¼ãƒ ã§ã‚ãã¹ã‚‹ã‚ˆï¼ğŸš©';
      }
    }
  }

  // === Empty State ===
  function showEmptyState(cat) {
    removeEmptyState();
    var el = document.createElement('div');
    el.className = 'empty-state';
    el.id = 'emptyState';
    el.innerHTML =
      '<div class="empty-icon">ğŸŒ¿</div>' +
      '<div class="empty-text">ã“ã®ã‚«ãƒ†ã‚´ãƒªã®ã‚²ãƒ¼ãƒ ã¯<br>ã¾ã ãªã„ã‚ˆã€‚ãŠãŸã®ã—ã¿ã«ï¼</div>';
    gameList.appendChild(el);
  }

  function removeEmptyState() {
    var el = document.getElementById('emptyState');
    if (el) el.remove();
  }

  // === Category Buttons ===
  catBtns.forEach(function(btn) {
    btn.addEventListener('click', function() {
      catBtns.forEach(function(b) { b.classList.remove('active'); });
      btn.classList.add('active');
      filterCards(btn.dataset.cat);
    });
  });

  // === Category Bar Scroll Hint ===
  function updateScrollHint() {
    var el = categoryBar;
    var scrollLeft = el.scrollLeft;
    var maxScroll = el.scrollWidth - el.clientWidth;

    el.classList.remove('scrolled-end', 'scrolled-mid');
    if (maxScroll <= 2) return; // no scroll needed
    if (scrollLeft <= 2) return; // at start, default mask
    if (scrollLeft >= maxScroll - 2) {
      el.classList.add('scrolled-end');
    } else {
      el.classList.add('scrolled-mid');
    }
  }
  categoryBar.addEventListener('scroll', updateScrollHint);

  // === Toast ===
  function showToast(msg) {
    var old = document.querySelector('.toast-msg');
    if (old) old.remove();
    var t = document.createElement('div');
    t.className = 'toast-msg';
    t.textContent = msg;
    document.body.appendChild(t);
    setTimeout(function() { t.remove(); }, 2500);
  }

  // === Init ===
  renderCards();
  filterCards('all');
  updateScrollHint();
</script>
</body>
</html>
